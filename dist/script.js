var cartaChunLi = {
    nome: "Chun Li",
    imagem:"http://gamehall.com.br/wp-content/uploads/2010/07/tpb_chun_li_legends_cover_by_omar_dogan-1-e1279925940855.jpg",
    atributos: {
        ataque: 75,
        defesa: 76,
        magia: 84
    }
}
var cartaMai = {
    nome: "Mai Shiranui",
    imagem: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR7QiIFJcPZID5-Zg6fb1rFqvd5v1MnhdCLyZ8eG9kv7Q9edRORJuXK4wt5a73POfK6tas&usqp=CAU",
    atributos: {
        ataque: 70,
        defesa: 65,
        magia: 85
    }
}
var cartaMorrigan = {
    nome: "Morrigan Aensland",
    imagem: "http://2.bp.blogspot.com/_2SfYuQFlY_g/SlZ-A-4u8AI/AAAAAAAAACg/oeMHGViRxq0/s320/Morrigan.jpg",
    atributos: {
        ataque: 69,
        defesa: 78,
        magia: 82
    }
}
var cartaCaitlyn = {
    nome: "Caitlyn",
    imagem: "http://1.bp.blogspot.com/-K7CbqWc1-p0/VLc98v85s0I/AAAAAAAABqk/-ZB684VVHbg/s1600/Caitlyn_OriginalSkin.jpg",
    atributos: {
        ataque: 95,
        defesa: 53,
        magia: 25
    }
}
var cartaNaruto = {
    nome: "Naruto",
    imagem: "https://conteudo.imguol.com.br/c/entretenimento/16/2017/06/27/naruto-1498593686428_v2_450x337.png",
    atributos: {
        ataque: 88,
        defesa: 89,
        magia: 100
    }
}
var cartaDrStranger = {
    nome: "Dr. Stranger",
    imagem: "https://i.pinimg.com/originals/92/64/d2/9264d2a919d5034e220ef5eb6ca74c28.jpg",
    atributos: {
        ataque: 65,
        defesa: 50,
        magia: 95
    }
}
var cartaBatman = {
    nome: "Batman",
    imagem: "https://assets.b9.com.br/wp-content/uploads/2020/09/Batman-issue86-heder-1280x677.jpg",
    atributos: {
        ataque: 70,
        defesa: 70,
        magia: 0
    }
}
var cartaMarvel = {
    nome: "Capitã Marvel",
    imagem: "https://cinepop.com.br/wp-content/uploads/2018/09/capitamarvel21.jpg",
    atributos: {
        ataque: 90,
        defesa: 80,
        magia: 72
    }
  }
var cartaMMaravilha = {
    nome: "Mulher Maravilha",
    imagem: "https://www.yescom.com.br/corridamulhermaravilha/2019/summer/2019/img/Mulher-maravilha_Summer2019.png",
    atributos: {
        ataque: 85,
        defesa: 89,
        magia: 65
  }
}
var cartaGoku = {
    nome: "Goku",
    imagem: "http://4.bp.blogspot.com/-1XcSHpY37yE/W7YErKsDEDI/AAAAAAAAfaU/Hwsn0fMl8rUAYl2eGEkGlfcHoGanRnHVwCK4BGAYYCw/s1600/Dragon-ball-z-kai-goku-super-saiyan-1000-i4.jpg",
    atributos: {
        ataque: 100,
        defesa: 100,
        magia: 100
    }
}
var cartaHanzo = {
    nome: "Hatori Hanzo",
    imagem: "http://pm1.narvii.com/7260/1062dd208f6422adbb74b40105dc9b40523bac01r1-768-768v2_00.jpg",
    atributos: {
        ataque: 92,
        defesa: 68,
        magia: 74
    }
}
var cartaArlequina = {
    nome: "Arlequina",
    imagem: "https://i0.wp.com/emotioncard.com.br/wp-content/uploads/2017/07/e4c49d6d3f9c8d49bb538c5ad7b39bab.jpg?resize=660%2C903&ssl=1",
    atributos: {
        ataque: 59,
        defesa: 59,
        magia: 0
    }
}
var cartaHulk = {
    nome: "Hulk",
    imagem: "https://i2.wp.com/www.nerdsite.com.br/wp-content/uploads/2019/11/hulk.png?resize=750%2C400&ssl=1",
    atributos: {
        ataque: 98,
        defesa: 95,
        magia: 65
    }
}
var cartaLeona = {
    nome: "Leona",
    imagem: "https://pbs.twimg.com/media/EJIpy8uWoAEf7HR.jpg",
    atributos: {
        ataque: 69,
        defesa: 70,
        magia: 75
    }
}
var cartaBlueMary = {
    nome: "Blue Mary",
    imagem: "https://preview.redd.it/a94v0m45o4x61.jpg?auto=webp&s=efb7dc6ae6e8a417565813c34fbfe2e4d63c4e28",
    atributos: {
        ataque: 69,
        defesa: 70,
        magia: 75
    }
}
var cartaHiei = {
    nome: "Hiei",
    imagem: "https://4.bp.blogspot.com/-HtztOQGPdKc/VssQWGOKwMI/AAAAAAAAMBw/pd1LcP1NP6Y/s1600/hiei69.png",
    atributos: {
        ataque: 93,
        defesa: 82,
        magia: 90
    }
}
var cartaAang = {
    nome: "Aang",
    imagem: "https://1.bp.blogspot.com/-xEqjHGgy8hY/XLD9F_tPxMI/AAAAAAAAAlE/4ZSegjEukwE9nnzdSrMffIAcb2xlY_dHgCEwYBhgL/s1600/Aang_meditates.png",
    atributos: {
        ataque: 68,
        defesa: 64,
        magia: 76
    }
}
var cartaShera = {
    nome: "She-ra",
    imagem: "https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/52c4a3ad-d416-42f0-90f6-570983e36797/dbj85iw-6ae8600c-98f9-4cff-af3e-800bd0f4c93f.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOiIsImlzcyI6InVybjphcHA6Iiwib2JqIjpbW3sicGF0aCI6IlwvZlwvNTJjNGEzYWQtZDQxNi00MmYwLTkwZjYtNTcwOTgzZTM2Nzk3XC9kYmo4NWl3LTZhZTg2MDBjLTk4ZjktNGNmZi1hZjNlLTgwMGJkMGY0YzkzZi5qcGcifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6ZmlsZS5kb3dubG9hZCJdfQ.H-nasrTn9PbWD7JAb6nTEYQv-AywD9tIDDlewaBqsro",
    atributos: {
        ataque: 96,
        defesa: 88,
        magia: 61
    }
}
var cartaMukuro = {
    nome: "Mukuro",
    imagem: "https://static.zerochan.net/Mukuro.%28Yu.Yu.Hakusho%29.full.1085113.jpg",
    atributos: {
        ataque: 99,
        defesa: 99,
        magia:100
    }
  
}
var cartaShiriyu = {
    nome: "Shiriyu",
    imagem: "https://cdna.artstation.com/p/assets/images/images/033/691/236/large/elson-soares-1610162356516-shiryu-de-dragao-v3.jpg?1610323835",
    atributos: {
        ataque: 67,
        defesa: 70,
        magia: 59
    }
}
var cartaShi = {
    nome: "Shi",
    imagem: "https://static3.cbrimages.com/wordpress/wp-content/uploads/2019/11/Shi-Return-of-the-Warrior-Header.jpg?q=50&fit=crop&w=960&h=500&dpr=1.5",
    atributos: {
        ataque: 74,
        defesa: 62,
        magia: 36
   }
}
var cartaSuperman = {
    nome: "Superman",
    imagem: "http://allmanaque.com//uploads/images/supermancmc.jpg",
    atributos: {
        ataque: 100,
        defesa: 100,
        magia: 100
  }
}
var cartaPsylocke = {
    nome: "Psylocke",
    imagem: "https://3.bp.blogspot.com/-r3qWalq_Ajg/WPPFCqIFGHI/AAAAAAAAxZ8/YJTdTDUoczMka6TOPecbFi7PcwrW6jPhQCLcB/s1600/psylock%2B004.jpg",
    atributos: {
        ataque: 83,
        defesa: 79,
        magia: 91
  }
}
var cartaSakura = {
    nome: "Sakura",
    imagem: "https://nerdhits.com.br/wp-content/uploads/2021/03/sakura-boruto-naruto-next-generations-1200x900.jpg",
    atributos: {
        ataque: 72,
        defesa: 69,
        magia: 74
  }
}
var cartaMaquina
var cartaJogador
var cartas = [cartaChunLi, cartaMai, cartaMorrigan, cartaCaitlyn, cartaNaruto, cartaDrStranger, cartaBatman, cartaMarvel, cartaMMaravilha, cartaGoku, cartaHanzo, cartaArlequina, cartaHulk, cartaLeona, cartaBlueMary, cartaHiei, cartaAang, cartaShera, cartaMukuro, cartaShiriyu, cartaShi, cartaSuperman, cartaPsylocke, cartaSakura]
// 0 , 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20 , 21, 22, 23
var jogo = []
var pontosJogador = 0
var pontosMaquina = 0

atualizaPlacar()
atualizaQuantidadeDeCartas()

function atualizaQuantidadeDeCartas(){
   var divQuantidadeCartas = document.getElementById('quantidade-cartas')
   var html = "Quantidade  de cartas do jogo: " + jogo.length
divQuantidadeCartas.innerHTML = html
}
//Atualiza a quantidade de cartas no jogo

function atualizaPlacar(){
    var divPlacar = document.getElementById('placar')
    var html = "Jogador " + pontosJogador + "/" + pontosMaquina + " Máquina"    
    divPlacar.innerHTML = html
  } 
//Atualiza o placar
function sortearCarta() {
 var numeroCartaMaquina = parseInt(Math.random() * jogo.length) 
    cartaMaquina = jogo[numeroCartaMaquina]
    jogo.splice(numeroCartaMaquina, 1)
  
 var numeroCartaJogador = parseInt(Math.random() * jogo.length)
    cartaJogador = jogo[numeroCartaJogador]
    jogo.splice(numeroCartaJogador, 1)  

    document.getElementById('btnSortear').disabled = true
    document.getElementById('btnJogar').disabled = false

    exibeCartaJogador()
}
//Faz o sorteio das cartas, exibe e remove do array a carta sorteada

function exibeCartaJogador() {
    var divCartaJogador = document.getElementById("carta-jogador")
    var moldura = '<img src="https://www.alura.com.br/assets/img/imersoes/dev-2021/card-super-trunfo-transparent.png" style=" width: inherit; height: inherit; position: absolute;">';
    divCartaJogador.style.backgroundImage = `url(${cartaJogador.imagem})`
    var nome = `<p class="carta-subtitle">${cartaJogador.nome}</p>`
    var opcoesTexto = ""
    for (var atributo in cartaJogador.atributos) {
        opcoesTexto += "<input type='radio' name='atributo' value='" + atributo + "'>" + atributo + " " + cartaJogador.atributos[atributo] + "<br>"
    }

    var html = "<div id='opcoes' class='carta-status'>"
    divCartaJogador.innerHTML = moldura + nome + html + opcoesTexto + '</div>'
}
//Adiciona a carta sorteada do jogador no array a moldura e nome da carta 

function obtemAtributoSelecionado() {
    var radioAtributo = document.getElementsByName('atributo')
    for (var i = 0; i < radioAtributo.length; i++) {
        if (radioAtributo[i].checked) {
            return radioAtributo[i].value
        }
    }
}
//checa o valor do atributo selecionado

function jogar() {
    var divResultado = document.getElementById("resultado")
    var atributoSelecionado = obtemAtributoSelecionado()

    if (cartaJogador.atributos[atributoSelecionado] > cartaMaquina.atributos[atributoSelecionado]) {
        htmlResultado = '<div id="resultado">Venceu</div>' 
        pontosJogador++
    } else if (cartaJogador.atributos[atributoSelecionado] < cartaMaquina.atributos[atributoSelecionado]) {
        htmlResultado = '<div id="resultado">Perdeu</div>'
        pontosMaquina++
    } else {
        htmlResultado = '<div id="resultado">Empatou</div>'
    }
    divResultado.innerHTML = htmlResultado
    document.getElementById('btnJogar').disabled = true
    document.getElementById('rec').disabled = false
  //Compara a carta do jogador com a carta da maquina e acrescenta os pontos ao vencedor imprimindo na tela o resultado
  // Desabilita o botão de jogar e habilita o de recomeçar
    
  resultadoFinal()   
    function resultadoFinal() {
      var fim = document.getElementById('resultadoFinal')
      if (jogo.length == 0 && pontosJogador > pontosMaquina){
      fim.innerHTML = '<div id="resultadoFinal">Vitória</div>'
    } else if  (jogo.length == 0 && pontosJogador < pontosMaquina){
      fim.innerHTML = '<div id="resultadoFinal">Derrota</div>'
    } else if (jogo.length == 0 && pontosJogador == pontosMaquina){
      fim.innerHTML = '<div id="resultadoFinal">Empate</div>'
    } else {
    document.getElementById('btnProximaRodada').disabled = false
        }
  }
  //Verifica o resultado final e imprime na tela  
  //Se o jogo não chegar ao fim habilita o botão de próxima rodada
        
    atualizaQuantidadeDeCartas()
    atualizaPlacar()
    exibeCartaMaquina()
  
  //chama as funções quantidade de cartas, atualizar placar e exibe carta máquina
  } 

function exibeCartaMaquina() {
    var divCartaMaquina = document.getElementById("carta-maquina")
    var moldura = '<img src="https://www.alura.com.br/assets/img/imersoes/dev-2021/card-super-trunfo-transparent.png" style=" width: inherit; height: inherit; position: absolute;">';
    divCartaMaquina.style.backgroundImage = `url(${cartaMaquina.imagem})`
    var nome = `<p class="carta-subtitle">${cartaMaquina.nome}</p>`
    var opcoesTexto = ""

    for (var atributo in cartaMaquina.atributos) {
        opcoesTexto += "<p type='text' name='atributo' value='" + atributo + "'>" + atributo + " " + cartaMaquina.atributos[atributo] + "<br>"
    }

    var html = "<div id='opcoes' class='carta-status --spacing'>"
    divCartaMaquina.innerHTML = moldura + nome + html + opcoesTexto + '</div>'
}
//Adiciona a carta sorteada da máquina no array a moldura e nome da carta 

function proximaRodada(){
var divCartas = document.getElementById('cartas')
divCartas.innerHTML = `<div id="carta-jogador" class="carta"></div> <div id="carta-maquina" class="carta"></div>`
document.getElementById('btnSortear').disabled  = false
document.getElementById('btnJogar').disabled = true
document.getElementById('btnProximaRodada').disabled = true
}
//Habilita o botão de próxima rodada 

recomeco()

function recomeco() {
  pontosJogador = 0
  pontosMaquina = 0
  atualizaPlacar()   
    for(var i = 0; i < cartas.length; i++){
      jogo.splice(jogo, 1)     
        } 
        for(var i = 0; i < cartas.length; i++){
          jogo.push(cartas[i])
        }    
       atualizaQuantidadeDeCartas() 
       document.getElementById('btnSortear').disabled  = false 
   var fim = document.getElementById('resultadoFinal')  
       fim.innerHTML = ""
   var divResultado = document.getElementById("resultado")
       htmlResultado = '<div id="resultado">Vamos começar uma partida</div>'
       divResultado.innerHTML = htmlResultado
   var divCartaJogador = document.getElementById("carta-jogador")
   var divCartaMaquina = document.getElementById("carta-maquina")
       divCartaJogador.style.backgroundImage = ""
       divCartaMaquina.style.backgroundImage = ""   
   var html = "<div id='opcoes' class='carta-status'>"
       divCartaJogador.innerHTML = '</div>'
       html = "<div id='opcoes' class='carta-status'>"
       divCartaMaquina.innerHTML = '</div>' 
 
     }
//Habilita o botão de recomeçar
//Zera os pontos da maquina, do jogador e atualiza o placar
//Remove os itens do array e adiciona todos eles novamente e atualiza a quantidade de cartas
//Limpa a tela de resultado final
//Imprime na tela de resultado "Vamos começar uma partida"
//Limpa as cartas do jogador e da máquina da tela